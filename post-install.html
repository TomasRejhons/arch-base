#!/bin/bash

NEW_USER_NAME=tomas

sudo pacman -S neovim

echo "---------------------------------------------"
echo "CONFIGURE SYSTEM"
echo "---------------------------------------------"

ln -sf /usr/share/zoneinfo/Europe/Prague /etc/localtime
sleep 1
hwclock --systohc
sleep 1
nvim /etc/locale.gen
sleep 1
locale-gen
sleep 1
echo "LANG=en_US.UTF-8" >> /etc/locale.conf
echo "archblue" >> /etc/hostname
echo "127.0.0.1 localhost" >> /etc/hosts
echo "::1 localhost" >> /etc/hosts
echo "127.0.1.1 archblue.localdomain  archblue" >> /etc/hosts

echo "---------------------------------------------"
echo "ROOT PASSWORD"
echo "---------------------------------------------"

passwd
sleep 1

echo "---------------------------------------------"
echo "INSTALL ADDITIONAL TOOLS"
echo "---------------------------------------------"

pacman -S grub \
          grub-btrfs \
          grub-customizer \
          efibootmgr \
          networkmanager \
          network-manager-applet \
          wireless_tools \
          wpa_supplicant \
          dialog \
          os-prober \
          mtools \
          dosfstools \
          base-devel \
          linux-headers \
          reflector \
          ntfs-3g \
          dhcpcd \
          flatpak

sleep 1

echo "---------------------------------------------"
echo "SETUP BOOTLOADER"
echo "---------------------------------------------"

grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=ARCH_GRUB
sleep 1
grub-mkconfig -o /boot/grub/grub.cfg
sleep 1
systemctl enable dhcpcd
sleep 1
systemctl enable NetworkManager
sleep 1

echo "---------------------------------------------"
echo "CREATE USER"
echo "---------------------------------------------"

useradd -mG wheel,audio,video,optical,storage $NEW_USER_NAME
sleep 1

echo "---------------------------------------------"
echo "USER PASSWORD"
echo "---------------------------------------------"

passwd $NEW_USER_NAME
sleep 1
EDITOR=nano visudo
sleep 1

echo "---------------------------------------------"
echo "DOWNLOADING SNAPPER INIT SCRIPT"
echo "---------------------------------------------"

wget tomasrejhons.github.io/malis/snapper-setup

echo "---------------------------------------------"
echo "DOWNLOADING ARCH-DI SCRIPT"
echo "---------------------------------------------"

wget archdi.sf.net/archdi

echo "---------------------------------------------"
echo "DON'T FORGET TO exit, umount -a and reboot !!!"
echo "---------------------------------------------"

